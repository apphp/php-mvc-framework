#-----------------------------------------
# Basic Deploy
#-----------------------------------------
name: Basic Deploy
env:
  APP_NAME: APPHP MVC FRAMEWORK
  DEPLOY_PACKAGE_NAME: "apphp-deploy-${{ github.sha }}"

#  [push]   
on:
  push:
    branches: 
      - master

jobs:
#  my-testing:
#    runs-on: ubuntu-latest

#    steps:
#    - name: Run testing
#      run: echo Testing is running...
#    
#    - name: Print env variables
#      run: | 
#        echo "App Name: ${{ env.APP_NAME }}"
   

  my-deploy:
    runs-on: [windows-latest]
 #   needs: [my-testing]
    
    steps:
      - name: Print env variables
        run: | 
          echo "Pack Name: ${{ env.DEPLOY_PACKAGE_NAME }}"
          
      - name: Git clone my repo  
        uses: actions/checkout@v1

      - name: List current folder
        run: ls -la
    
      - name: Check some packages if they are installed
        run: | 
          composer --version
          phpunit --version

      - name: Install PHPUnit
        run: composer require phpunit/phpunit ^7

      - name: Check again some packages if they are installed
        run: | 
          composer --version
          phpunit --version
    
      - name: Runt PHPUnit tests 
        run: composer tests

      #- name: Test some packages if they are installed
      #  run: | 
      #    @aws --version
      #    #zip --v
      
      
      
      
        
      
